module yuzuswap::bit_math {
    public fun least_significant_bit_u256(p0: u256): u8 {
        assert!(p0 > 0u256, 2);
        let _v0 = 0u8;
        if (p0 << 128u8 != 0u256) {
            p0 = p0 << 128u8;
            _v0 = 128u8
        };
        if (p0 << 64u8 != 0u256) {
            p0 = p0 << 64u8;
            _v0 = _v0 + 64u8
        };
        if (p0 << 32u8 != 0u256) {
            p0 = p0 << 32u8;
            _v0 = _v0 + 32u8
        };
        if (p0 << 16u8 != 0u256) {
            p0 = p0 << 16u8;
            _v0 = _v0 + 16u8
        };
        if (p0 << 8u8 != 0u256) {
            p0 = p0 << 8u8;
            _v0 = _v0 + 8u8
        };
        if (p0 << 4u8 != 0u256) {
            p0 = p0 << 4u8;
            _v0 = _v0 + 4u8
        };
        if (p0 << 2u8 != 0u256) {
            p0 = p0 << 2u8;
            _v0 = _v0 + 2u8
        };
        if (p0 << 1u8 != 0u256) _v0 = _v0 + 1u8;
        255u8 - _v0
    }
    public fun most_significant_bit_u128(p0: u128): u8 {
        assert!(p0 > 0u128, 1);
        let _v0 = 0u8;
        if (p0 > 340282366920938463463374607431768211455u128) {
            p0 = p0 >> 128u8;
            _v0 = 128u8
        };
        if (p0 > 18446744073709551615u128) {
            p0 = p0 >> 64u8;
            _v0 = _v0 + 64u8
        };
        if (p0 > 4294967295u128) {
            p0 = p0 >> 32u8;
            _v0 = _v0 + 32u8
        };
        if (p0 > 65535u128) {
            p0 = p0 >> 16u8;
            _v0 = _v0 + 16u8
        };
        if (p0 > 255u128) {
            p0 = p0 >> 8u8;
            _v0 = _v0 + 8u8
        };
        if (p0 > 15u128) {
            p0 = p0 >> 4u8;
            _v0 = _v0 + 4u8
        };
        if (p0 > 3u128) {
            p0 = p0 >> 2u8;
            _v0 = _v0 + 2u8
        };
        if (p0 > 1u128) _v0 = _v0 + 1u8;
        _v0
    }
    public fun most_significant_bit_u256(p0: u256): u8 {
        assert!(p0 > 0u256, 1);
        let _v0 = 0u8;
        if (p0 > 340282366920938463463374607431768211455u256) {
            p0 = p0 >> 128u8;
            _v0 = 128u8
        };
        if (p0 > 18446744073709551615u256) {
            p0 = p0 >> 64u8;
            _v0 = _v0 + 64u8
        };
        if (p0 > 4294967295u256) {
            p0 = p0 >> 32u8;
            _v0 = _v0 + 32u8
        };
        if (p0 > 65535u256) {
            p0 = p0 >> 16u8;
            _v0 = _v0 + 16u8
        };
        if (p0 > 255u256) {
            p0 = p0 >> 8u8;
            _v0 = _v0 + 8u8
        };
        if (p0 > 15u256) {
            p0 = p0 >> 4u8;
            _v0 = _v0 + 4u8
        };
        if (p0 > 3u256) {
            p0 = p0 >> 2u8;
            _v0 = _v0 + 2u8
        };
        if (p0 > 1u256) _v0 = _v0 + 1u8;
        _v0
    }
}
